<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>欢迎页面-L-admin1.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
        content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <script src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/xadmin.js"></script>

    <style>

    </style>
</head>

<body class="form-wrap">

    <div class="layui-fluid">
        <div class="layui-card">
            <div class="layui-tab layui-tab-brief" lay-filter="component-tabs-hash">
                <ul class="layui-tab-title">
                    <!-- <li class="layui-this" lay-id="11">个人信息</li> -->
                    <li class="layui-this" lay-id="11">密码更改</li>

                </ul>
                <div class="layui-tab-content" style="height:500px;">
                    <!-- <div class="layui-tab-item layui-show">
                        <div class="layui-card-body layui-row" style="padding: 15px;margin-top: 15px;">

                            <div class="layui-col-md4">
                                <p>ps:邮箱无法修改，<br />修改个人信息需要确认密码</p>
                            </div>
                            <form class="layui-form layui-col-md6" action="" lay-filter="component-form-group">
                                <div class="layui-form-item">
                                    <label class="layui-form-label">真名</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="title" lay-verify="title" autocomplete="off"
                                            placeholder="请输入真名" class="layui-input">
                                    </div>
                                </div>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">笔名</label>
                                    <div class="layui-input-inline">
                                        <input type="text" name="title" lay-verify="title" autocomplete="off"
                                            placeholder="请输入笔名" class="layui-input">
                                    </div>
                                </div>

                                <div class="layui-form-item">

                                    <div class="layui-inline">
                                        <label class="layui-form-label">邮箱</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="email" lay-verify="email" autocomplete="off"
                                                disabled="true" class="layui-input">
                                        </div>
                                    </div>
                                </div>

                                <div class="layui-form-item">

                                    <div class="layui-form-item">
                                        <label class="layui-form-label">手机账号</label>
                                        <div class="layui-input-inline">
                                            <input type="text" name="title" lay-verify="title" autocomplete="off"
                                                placeholder="请输入支付宝账号" class="layui-input">
                                        </div>
                                    </div>

                                </div>


                                <div class="layui-form-item">
                                    <label class="layui-form-label">确认密码</label>
                                    <div class="layui-input-inline">
                                        <input type="password" name="password" lay-verify="pass" placeholder="请输入密码"
                                            autocomplete="off" class="layui-input">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
                                </div>



                                <div class="layui-form-item ">
                                    <div class="layui-input-block">
                                        <div class="layui-footer" style="left: 0;">
                                            <button class="layui-btn" lay-submit=""
                                                lay-filter="component-form-demo1">立即提交</button>
                                            <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div> -->
                    <div class="layui-tab-item layui-show">
                        <div class="layui-tab-item layui-show">
                            <div class="layui-card-body layui-row" style="padding: 15px;margin-top: 15px;">

                                <div class="layui-col-md4">
                                    <p>ps:修改密码需要确认原密码</p>
                                </div>
                                <form class="layui-form layui-col-md6" onsubmit="return false;" action=""
                                    lay-filter="component-form-group">

                                    <div class="layui-form-item">
                                        <label class="layui-form-label">原密码</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="password" id="oldpwd" lay-verify="pass"
                                                placeholder="请输入密码" autocomplete="off" class="layui-input">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">请填写6到16位密码</div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label">新密码</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="password" id="newpwd" lay-verify="pass"
                                                placeholder="请输入密码" autocomplete="off" class="layui-input">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">请填写6到16位密码</div>
                                    </div>

                                    <div class="layui-form-item">
                                        <label class="layui-form-label">确认密码</label>
                                        <div class="layui-input-inline">
                                            <input type="password" name="password" id="repwd" lay-verify="pass"
                                                placeholder="请输入密码" autocomplete="off" class="layui-input">
                                        </div>
                                        <div class="layui-form-mid layui-word-aux">请填写6到16位密码</div>
                                    </div>


                                    <div class="layui-form-item ">
                                        <div class="layui-input-block">
                                            <div class="layui-footer" style="left: 0;">
                                                <button class="layui-btn" lay-submit=""
                                                    lay-filter="component-form-demo1"
                                                    onclick="updatePwd()">立即提交</button>
                                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>


    <script>

        function updatePwd() {


            var oldpwd = $("#oldpwd").val();
            var newpwd = $("#newpwd").val();
            var repwd = $("#repwd").val();
            var data = {
                oldpwd,
                newpwd,
                repwd
            };
            var reg_password = /^\w{6,16}$/;
            var flag = reg_password.test(newpwd);
            console.log(flag)
            if(!flag){
                alert("密码格式不正确");
                return;
            }
            // console.log(data);
            $.ajax({
                url: '/bookread/writer/updatePwd',
                type: 'post',
                data: data,
                dataType: "json",
                success: function (data, status) {
                    alert(data.message);
                    if (data.result) {
                        $("#oldpwd").val("");
                        $("#newpwd").val("");
                        $("#repwd").val("");
                    }

                }
            })

        }
    </script>



</body>


</html>